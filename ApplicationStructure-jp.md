 アプリケーション構成
======================

## このアプリでカバーしたい要件

* あるフォルダにある画像を、ユーザ指定のフォルダへサクサク整理できる
* 整理した後のフォルダの中身をギャラリー形式で見られる

## 概念

### アルバム

画像を整理する単位。
次のプロパティで構成される。

* 未整理フォルダ
  * 整理する前の画像が格納されているフォルダへのパスとラベル
* 整理フォルダ
  * 画像を整理・格納しておきたいフォルダへのパス/ラベル/ID
  * 複数指定可能

## フロントエンド

### アルバム選択・作成

* 前提
  * なし
* 機能
  * アルバムを作成できる
  * 既にあるアルバムを選択できる

### フォルダ選択 *コンポーネント*

* 前提
  * なし
* 機能
  * フォルダ選択
    * First: ファイルパス直指定で選択できるようにする
    * Second: フォルダ選択用 UI (`vue ui` みたいなやつ) で選択できるようにする

### メインメニュー

* 前提
  * アルバムが選択されている
* 機能
  * 各画面への遷移(未整理画像の整理、ギャラリー)

### 未整理画像の整理

* 前提
  * アルバムが選択されている
* 機能
  * 未整理フォルダ内の画像をワンクリックで整理フォルダへ移動する
  * 画像をスキップする
    * どの整理フォルダへ移動するか迷った時にとりあえず後回しにできる

### ギャラリー(整理フォルダリスト)

* 前提
  * アルバムが選択されている
* 機能
  * どの整理フォルダの中身を見るかを選択できる
    * 選択すると画像リスト画面へ移動する

### ギャラリー(画像リスト)

* 前提
  * 整理フォルダが選択されている
* 機能
  * どの画像を見るかを選択できる

### ギャラリー(画像表示モード)

* 前提
  * 画像が選択されている
* 機能
  * 画像を全画面表示で見れる
  * 左右ボタン and/or 左右スワイプ で前後の画像に移動できる


## バックエンド

* `/`: フロントエンドの配信
* `/api/`: バックエンドのルートエンドポイント
  * `album`
    * *GET*: 登録されているアルバム情報全てのリストを返す
    * *POST*: アルバムを新しく作成し、アルバムIDを返す
    * `/:id` 
      * *GET*: アルバム情報を返す
      * *POST*: アルバム情報を更新する
  * `directory`
    * `/:album-id`
      * `/source` *GET*: 未整理フォルダの中身の画像のリストを返す
        * `/:file-name` *GET*: 未整理フォルダ内の画像データを返す
        * `/thumb/:file-name` *GET*: サムネイル用にバックエンド側で決め打ちしたサイズにリサイズした画像データを返す 
      * `/arranged/:dest-dir-idx` *GET*: 整理フォルダの中身の画像のリストを返す
        * `/:file-name` *GET*: 指定されている整理フォルダ内の画像データを返す
        * `/thumb/:file-name` *GET*: サムネイル用にバックエンド側で決め打ちしたサイズにリサイズした画像データを返す
  * `move`
    * `/:album-id`
      * `/source` *POST*: ペイロードで指定された画像ファイルを指定された整理フォルダへ移す
      * `/arranged/:dest-dir-idx` *POST*: ペイロードで指定された画像ファイルを未整理フォルダへ移す